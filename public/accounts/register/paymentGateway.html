<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShelfSync | Payment Gateway</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="shortcut icon" href="../../Logo.png" type="image/x-icon">
    <script src="https://kit.fontawesome.com/d63d2ac69c.js" crossorigin="anonymous"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        text: '#e2deee',
                        background: '#0b0914',
                        primary: '#a595da',
                        secondary: '#3d278a',
                        accent: '#6746d6'
                    },
                    fontFamily: {
                        'monoton': ['Monoton', 'cursive'],
                        'inter': ['Inter', 'sans-serif']
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'slide-up': 'slideUp 0.8s ease-out',
                        'fade-in': 'fadeIn 1s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'spin-slow': 'spin 2s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px #6746d6' },
                            '100%': { boxShadow: '0 0 40px #6746d6, 0 0 60px #a595da' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(100px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        }
                    }
                }
            }
        };
    </script>
</head>
<body class="bg-background text-text font-inter min-h-screen relative overflow-x-hidden">
    <!-- Animated background -->
    <div class="fixed inset-0 -z-10">
        <div class="absolute top-20 left-10 w-72 h-72 bg-accent opacity-20 rounded-full filter blur-xl animate-float"></div>
        <div class="absolute bottom-20 right-10 w-96 h-96 bg-primary opacity-10 rounded-full filter blur-xl animate-float" style="animation-delay: -3s;"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-secondary opacity-30 rounded-full filter blur-xl animate-pulse-slow"></div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-background/90 backdrop-blur-sm z-50 hidden items-center justify-center">
        <div class="text-center">
            <div class="animate-spin-slow w-16 h-16 border-4 border-accent/30 border-t-accent rounded-full mx-auto mb-4"></div>
            <p id="loadingText" class="text-xl text-primary">Processing payment...</p>
            <p class="text-sm text-text/70 mt-2">Please do not refresh the page</p>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-background/90 backdrop-blur-sm z-50 hidden items-center justify-center">
        <div class="bg-gradient-to-br from-secondary/20 to-accent/10 border border-primary/30 rounded-2xl p-8 max-w-md mx-4 text-center animate-slide-up">
            <div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-check-circle text-4xl text-green-400"></i>
            </div>
            <h3 class="text-2xl font-bold text-primary mb-4">Payment Successful!</h3>
            <p class="text-text/80 mb-6">Your store registration has been completed successfully. Welcome to ShelfSync!</p>
            <button onclick="redirectToDashboard()" class="w-full bg-gradient-to-r from-accent to-primary hover:from-accent/80 hover:to-primary/80 text-white py-3 px-6 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 animate-glow">
                Go to Dashboard
            </button>
        </div>
    </div>

    <!-- Alert Container -->
    <div id="alertContainer" class="fixed top-6 right-6 z-40 max-w-md"></div>

    <div class="container mx-auto px-6 py-8">
        <!-- Header -->
        <div class="text-center mb-12 animate-fade-in">
            <h1 class="text-5xl font-monoton bg-gradient-to-r from-accent to-primary bg-clip-text text-transparent mb-4">
                Payment Gateway
            </h1>
            <p class="text-xl text-text/80">Complete your store registration</p>
        </div>

        <div class="max-w-4xl mx-auto grid lg:grid-cols-2 gap-8">
            <!-- Order Summary -->
            <div class="bg-gradient-to-br from-secondary/20 to-accent/10 border border-primary/30 rounded-2xl p-8 animate-slide-up">
                <h2 class="text-2xl font-bold text-primary mb-6 flex items-center">
                    <i class="fas fa-receipt mr-3"></i>
                    Order Summary
                </h2>
                
                <div class="space-y-4">
                    <div class="flex justify-between items-center py-3 border-b border-primary/20">
                        <span class="text-text/80">Store Registration Fee</span>
                        <span class="text-xl font-semibold text-primary">₹499</span>
                    </div>
                    
                    <div class="flex justify-between items-center py-3 border-b border-primary/20">
                        <span class="text-text/80">Platform Setup</span>
                        <span class="text-xl font-semibold text-primary">₹299</span>
                    </div>
                    
                    <div class="flex justify-between items-center py-3 border-b border-primary/20">
                        <span class="text-text/80">GST (18%)</span>
                        <span class="text-xl font-semibold text-primary">₹388.82</span>
                    </div>
                    
                    <div class="bg-gradient-to-r from-accent/20 to-primary/20 rounded-lg p-4 mt-6">
                        <div class="flex justify-between items-center">
                            <span class="text-xl font-bold text-accent">Total Amount</span>
                            <span class="text-3xl font-bold text-accent">₹1,186.82</span>
                        </div>
                    </div>
                </div>

                <!-- Features Included -->
                <div class="mt-8">
                    <h3 class="text-lg font-semibold text-primary mb-4">What's Included:</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center text-text/80">
                            <i class="fas fa-check-circle text-green-400 mr-3"></i>
                            Complete store dashboard
                        </li>
                        <li class="flex items-center text-text/80">
                            <i class="fas fa-check-circle text-green-400 mr-3"></i>
                            Order management system
                        </li>
                        <li class="flex items-center text-text/80">
                            <i class="fas fa-check-circle text-green-400 mr-3"></i>
                            Customer analytics
                        </li>
                        <li class="flex items-center text-text/80">
                            <i class="fas fa-check-circle text-green-400 mr-3"></i>
                            Stock Tracker
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Payment Form -->
            <div class="bg-gradient-to-br from-secondary/20 to-accent/10 border border-primary/30 rounded-2xl p-8 animate-slide-up" style="animation-delay: 0.2s;">
                <h2 class="text-2xl font-bold text-primary mb-6 flex items-center">
                    <i class="fas fa-credit-card mr-3"></i>
                    Payment Details
                </h2>

                <form id="paymentForm" class="space-y-6">
                    <!-- Payment Method Selection -->
                    <div>
                        <label class="block text-sm font-semibold text-text/90 mb-3">Payment Method</label>
                        <div class="grid grid-cols-2 gap-4">
                            <label class="payment-method cursor-pointer">
                                <input type="radio" name="paymentMethod" value="card" class="sr-only" checked>
                                <div class="border-2 border-primary/30 rounded-lg p-4 text-center transition-all duration-300 hover:border-accent hover:bg-accent/10">
                                    <i class="fas fa-credit-card text-2xl text-primary mb-2"></i>
                                    <p class="text-sm font-medium">Credit/Debit Card</p>
                                </div>
                            </label>
                            <label class="payment-method cursor-pointer">
                                <input type="radio" name="paymentMethod" value="upi" class="sr-only">
                                <div class="border-2 border-primary/30 rounded-lg p-4 text-center transition-all duration-300 hover:border-accent hover:bg-accent/10">
                                    <i class="fas fa-mobile-alt text-2xl text-primary mb-2"></i>
                                    <p class="text-sm font-medium">UPI</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Card Payment Form -->
                    <div id="cardForm" class="space-y-4">
                        <div>
                            <label for="cardNumber" class="block text-sm font-medium text-text/80 mb-2">Card Number</label>
                            <div class="relative">
                                <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" 
                                    class="w-full bg-background/50 border border-primary/30 rounded-lg px-4 py-3 text-text placeholder-text/50 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all duration-300">
                                <div class="absolute right-3 top-3 flex space-x-2">
                                    <i class="fab fa-cc-visa text-blue-400"></i>
                                    <i class="fab fa-cc-mastercard text-red-400"></i>
                                    <i class="fab fa-cc-amex text-green-400"></i>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="expiryDate" class="block text-sm font-medium text-text/80 mb-2">Expiry Date</label>
                                <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY" maxlength="5"
                                    class="w-full bg-background/50 border border-primary/30 rounded-lg px-4 py-3 text-text placeholder-text/50 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all duration-300">
                            </div>
                            <div>
                                <label for="cvv" class="block text-sm font-medium text-text/80 mb-2">CVV</label>
                                <input type="password" id="cvv" name="cvv" placeholder="123" maxlength="4"
                                    class="w-full bg-background/50 border border-primary/30 rounded-lg px-4 py-3 text-text placeholder-text/50 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all duration-300">
                            </div>
                        </div>

                        <div>
                            <label for="cardName" class="block text-sm font-medium text-text/80 mb-2">Cardholder Name</label>
                            <input type="text" id="cardName" name="cardName" placeholder="John Doe"
                                class="w-full bg-background/50 border border-primary/30 rounded-lg px-4 py-3 text-text placeholder-text/50 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all duration-300">
                        </div>
                    </div>

                    <!-- UPI Payment Form -->
                    <div id="upiForm" class="space-y-4 hidden">
                        <div>
                            <label for="upiId" class="block text-sm font-medium text-text/80 mb-2">UPI ID</label>
                            <input type="text" id="upiId" name="upiId" placeholder="yourname@upi"
                                class="w-full bg-background/50 border border-primary/30 rounded-lg px-4 py-3 text-text placeholder-text/50 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all duration-300">
                        </div>
                        
                        <div class="text-center py-8">
                            <div class="bg-white rounded-lg p-4 inline-block">
                                <div class="w-32 h-32 bg-gray-200 rounded flex items-center justify-center">
                                    <i class="fas fa-qrcode text-4xl text-gray-600"></i>
                                </div>
                            </div>
                            <p class="text-sm text-text/60 mt-4">Scan QR code with your UPI app</p>
                        </div>
                    </div>

                    <!-- Security Info -->
                    <div class="bg-gradient-to-r from-green-500/10 to-blue-500/10 border border-green-500/20 rounded-lg p-4 flex items-start">
                        <i class="fas fa-shield-alt text-green-400 text-xl mr-3 mt-1"></i>
                        <div>
                            <h4 class="font-semibold text-green-400 mb-1">Secure Payment</h4>
                            <p class="text-sm text-text/70">Your payment information is encrypted and secure. We use industry-standard SSL encryption.</p>
                        </div>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="flex items-start">
                        <input type="checkbox" id="terms" name="terms" required 
                            class="mt-1 mr-3 w-4 h-4 text-accent border-primary/30 rounded focus:ring-accent/50">
                        <label for="terms" class="text-sm text-text/80">
                            I agree to the <a href="#" class="text-accent hover:underline">Terms and Conditions</a> and 
                            <a href="#" class="text-accent hover:underline">Privacy Policy</a>
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="w-full bg-gradient-to-r from-accent to-primary hover:from-accent/80 hover:to-primary/80 text-white py-4 px-6 rounded-lg font-bold text-lg transition-all duration-300 transform hover:scale-105 animate-glow">
                        <i class="fas fa-lock mr-2"></i>
                        Pay ₹1,186.82 Securely
                    </button>
                </form>

                <!-- Support Info -->
                <div class="mt-6 text-center">
                    <p class="text-sm text-text/60">
                        Need help? Contact our support team at 
                        <a href="mailto:support@ShelfSync.com" class="text-accent hover:underline">support@ShelfSync.com</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const paymentMethodInputs = document.querySelectorAll('input[name="paymentMethod"]');
            const cardForm = document.getElementById('cardForm');
            const upiForm = document.getElementById('upiForm');
            const paymentForm = document.getElementById('paymentForm');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const successModal = document.getElementById('successModal');
            const alertContainer = document.getElementById('alertContainer');

            // Handle payment method switching
            function updatePaymentForm() {
                const selectedMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
                
                // Update visual styles for payment methods
                document.querySelectorAll('.payment-method').forEach(method => {
                    const input = method.querySelector('input');
                    const div = method.querySelector('div');
                    
                    if (input.checked) {
                        div.classList.add('border-accent', 'bg-accent/10');
                        div.classList.remove('border-primary/30');
                    } else {
                        div.classList.remove('border-accent', 'bg-accent/10');
                        div.classList.add('border-primary/30');
                    }
                });

                // Show/hide forms
                if (selectedMethod === 'card') {
                    cardForm.classList.remove('hidden');
                    upiForm.classList.add('hidden');
                } else {
                    cardForm.classList.add('hidden');
                    upiForm.classList.remove('hidden');
                }
            }

            paymentMethodInputs.forEach(input => {
                input.addEventListener('change', updatePaymentForm);
            });

            // Initialize form display
            updatePaymentForm();

            // Card number formatting
            document.getElementById('cardNumber').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
                let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                if (formattedValue.length > 19) formattedValue = formattedValue.substr(0, 19);
                e.target.value = formattedValue;
            });

            // Expiry date formatting
            document.getElementById('expiryDate').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                e.target.value = value;
            });

            // CVV validation
            document.getElementById('cvv').addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/\D/g, '');
            });

            // Show alert function
            function showAlert(message, type = 'error') {
                const alert = document.createElement('div');
                const bgColor = type === 'success' ? 'from-green-500/20 to-green-600/10' : 'from-red-500/20 to-red-600/10';
                const borderColor = type === 'success' ? 'border-green-500/30' : 'border-red-500/30';
                const textColor = type === 'success' ? 'text-green-400' : 'text-red-400';
                const icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle';

                alert.className = `bg-gradient-to-r ${bgColor} border ${borderColor} ${textColor} p-4 rounded-lg shadow-lg mb-4 flex items-center animate-fade-in`;
                alert.innerHTML = `
                    <i class="fas ${icon} mr-3"></i>
                    <span class="flex-1">${message}</span>
                    <button onclick="this.parentElement.remove()" class="ml-3 text-current hover:opacity-70">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                alertContainer.appendChild(alert);

                setTimeout(() => {
                    if (alert.parentElement) {
                        alert.remove();
                    }
                }, 5000);
            }

            // Show loading
            function showLoading(text = 'Processing payment...') {
                document.getElementById('loadingText').textContent = text;
                loadingOverlay.classList.remove('hidden');
                loadingOverlay.classList.add('flex');
            }

            // Hide loading
            function hideLoading() {
                loadingOverlay.classList.add('hidden');
                loadingOverlay.classList.remove('flex');
            }

            // Handle form submission
            paymentForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = new FormData(paymentForm);
                const paymentMethod = formData.get('paymentMethod');
                
                // Basic validation
                if (!formData.get('terms')) {
                    showAlert('Please accept the terms and conditions.');
                    return;
                }

                if (paymentMethod === 'card') {
                    const cardNumber = formData.get('cardNumber').replace(/\s/g, '');
                    const expiryDate = formData.get('expiryDate');
                    const cvv = formData.get('cvv');
                    const cardName = formData.get('cardName');

                    if (!cardNumber || cardNumber.length < 16) {
                        showAlert('Please enter a valid card number.');
                        return;
                    }
                    
                    if (!expiryDate || !/^\d{2}\/\d{2}$/.test(expiryDate)) {
                        showAlert('Please enter a valid expiry date (MM/YY).');
                        return;
                    }
                    
                    if (!cvv || cvv.length < 3) {
                        showAlert('Please enter a valid CVV.');
                        return;
                    }
                    
                    if (!cardName || cardName.trim().length < 2) {
                        showAlert('Please enter the cardholder name.');
                        return;
                    }
                } else if (paymentMethod === 'upi') {
                    const upiId = formData.get('upiId');
                    if (!upiId || !upiId.includes('@')) {
                        showAlert('Please enter a valid UPI ID.');
                        return;
                    }
                }

                showLoading('Processing your payment...');

                // Simulate payment processing
                setTimeout(() => {
                    hideLoading();
                    successModal.classList.remove('hidden');
                    successModal.classList.add('flex');
                }, 3000);
            });

            // Redirect to dashboard function
            window.redirectToDashboard = function() {
                showLoading('Redirecting to your dashboard...');
                setTimeout(() => {
                    window.location.href = '../../dashboards/store/';
                }, 3000);
            };
        });
    </script>
</body>
</html>